<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµì‚¬ ì—°ê¸ˆ ìˆ˜ë ¹ì¼ ê³„ì‚°ê¸° v10</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            line-height: 1.7;
            background-color: #f8f9fa;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 700px;
            width: 100%;
            background: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
            margin-bottom: 20px;
        }

        /* ì„¤ëª… ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .general-explanation {
            background-color: #f0f7ff;
            border: 1px solid #b3d7ff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 15px;
            line-height: 1.8;
        }
        .general-explanation h2 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #005a9c;
            border-bottom: 1px solid #005a9c;
            padding-bottom: 8px;
            font-size: 18px;
        }
        .general-explanation h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
            font-weight: bold;
        }
        .general-explanation ul {
            padding-left: 20px;
            list-style-type: disc;
            margin: 10px 0;
        }
        
        /* 2001ë…„ ê¸°ì¤€ì¼ ì„¤ëª… ê°•ì¡° ë°•ìŠ¤ (NEW) */
        .why-split-box {
            background-color: #fff0f0;
            border: 1px solid #ffcccc;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 14px;
        }
        .why-split-title {
            color: #d9534f;
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }

        h1 {
            color: #005a9c;
            padding-bottom: 5px;
            text-align: center;
            font-size: 28px;
            margin-bottom: 0;
        }
        .subtitle {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #005a9c;
            padding-bottom: 10px;
        }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 15px; }
        .full-width { grid-column: 1 / -1; }
        
        .input-group-wrapper { padding: 20px; border-radius: 8px; border: 1px solid #ddd; }
        #include-group { background-color: #f0f7ff; border-color: #b3d7ff; }
        #exclude-group { background-color: #fff8f0; border-color: #ffe0b3; }
        #common-inputs { background-color: #fffbe6; border: 1px solid #ffe58f; padding: 20px; border-radius: 8px; margin-bottom: 20px; }

        .group-title { margin-top: 0; margin-bottom: 15px; text-align: center; font-size: 17px; color: #333; border-bottom: 1px solid #ccc; padding-bottom: 10px; font-weight: bold; }
        
        label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 16px; }
        input[type="date"], input[type="number"] { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; }
        
        button { background-color: #005a9c; color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; width: 100%; font-weight: bold; transition: background-color 0.3s ease; margin-top: 20px; }
        button:hover { background-color: #004a80; }
        
        #result-container { margin-top: 25px; }
        .final-result { font-size: 22px; font-weight: bold; color: #d9534f; background-color: #fdf7f7; padding: 20px; border: 1px solid #f5c6cb; border-radius: 5px; text-align: center; }
        .retirement-info { background-color: #e6f7ff; border: 1px solid #91d5ff; padding: 15px; border-radius: 5px; margin-top: 15px; text-align: center; font-size: 18px; }
        
        .calculation-box { background-color: #f9f9f9; border: 1px solid #ddd; padding: 20px; border-radius: 5px; margin-top: 20px; font-family: 'Consolas', 'Courier New', monospace; line-height: 1.8; font-size: 15px; display: none; }
        hr { border: 0; border-top: 1px dashed #ccc; margin: 15px 0; }
        .footer { text-align: center; font-size: 14px; color: #888; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="container">

        <div class="general-explanation">
            <h2>ğŸ« ê³µë¬´ì›ì—°ê¸ˆë²•ìƒ 'ì—°ê¸ˆì‹œì ì¼' ê°€ì´ë“œ</h2>
            
            <h3>1. 1996ë…„ 1ì›” 1ì¼ ì´ì „ ì„ìš©ì</h3>
            <ul>
                <li><strong>íŠ¹ì§•:</strong> ì •ë…„(62ì„¸) ì´ì „ì— ì—°ê¸ˆ ì§€ê¸‰ ìš”ê±´ì´ ì¶©ì¡±ë˜ëŠ”ì§€ í™•ì¸ (x2 ê³µì‹ ì ìš©)</li>
            </ul>
            
            <!-- [NEW] 2001ë…„ ë¶„í•  ì´ìœ  ì„¤ëª… ì¶”ê°€ -->
            <div class="why-split-box">
                <span class="why-split-title">â“ ì™œ 2000ë…„ê³¼ 2001ë…„ì„ ë‚˜ëˆ„ì–´ ì…ë ¥í•˜ë‚˜ìš”?</span>
                <p style="margin:0;">
                    2001ë…„ ì—°ê¸ˆë²• ê°œì • ë‹¹ì‹œ, <strong>"2000ë…„ 12ì›” 31ì¼ ê¸°ì¤€ìœ¼ë¡œ 20ë…„(240ê°œì›”)ì„ ëª» ì±„ìš´ ê¸°ê°„ë§Œí¼, 2001ë…„ë¶€í„° 2ë°°ë¡œ ë” ê·¼ë¬´í•´ì•¼ í•œë‹¤"</strong>ëŠ” ê·œì¹™ì´ ìƒê²¼ìŠµë‹ˆë‹¤.<br><br>
                    ë”°ë¼ì„œ <strong>2000.12.31.ê¹Œì§€ ê·¼ë¬´í•œ ê¸°ê°„(B1)</strong>ì´ ë§ì„ìˆ˜ë¡, 2ë°°ë¡œ ê°šì•„ì•¼ í•  ê¸°ê°„ì´ ì¤„ì–´ë“¤ê¸° ë•Œë¬¸ì— ì‹œì ì„ ë‚˜ëˆ„ì–´ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤.
                </p>
            </div>

            <h3>2. 1996ë…„ 1ì›” 1ì¼ ì´í›„ ì„ìš©ì</h3>
            <ul>
                <li><strong>íŠ¹ì§•:</strong> ì •ë…„(62ì„¸) í‡´ì§ í›„ 'ì†Œë“ ê³µë°±' ë°œìƒ ì—¬ë¶€ í™•ì¸</li>
                <li><strong>ì ìš©:</strong> í‡´ì§ì—°ë„ì— ë”°ë¼ ë§Œ 60~65ì„¸ ê°œì‹œ</li>
            </ul>
        </div>

        <h1>êµì‚¬ ì—°ê¸ˆ ìˆ˜ë ¹ì¼ ê³„ì‚°ê¸° V1.0 </h1>
        <p class="subtitle" id="subtitle-text">1996.1.1. ì´ì „ ë°œë ¹ì</p>

        <div id="common-inputs">
            <div class="form-grid">
                <div class="form-group">
                    <label for="startDate">D (ë°œë ¹ì¼):</label>
                    <input type="date" id="startDate" value="1995-09-01" onchange="checkCalculatorMode()">
                </div>
                <div class="form-group">
                    <label for="birthDate">ë³¸ì¸ ìƒë…„ì›”ì¼:</label>
                    <input type="date" id="birthDate" value="1970-01-01">
                </div>
            </div>
        </div>
        
        <div id="legacy-inputs">
            <div class="form-grid">
                <div class="input-group-wrapper" id="include-group">
                    <h3 class="group-title">B (ì¬ì§ í¬í•¨)</h3>
                    <div class="form-group">
                        <label for="b1_months">B1 (2000.12.31.ê¹Œì§€)</label>
                        <input type="number" id="b1_months" value="28">
                    </div>
                    <div class="form-group">
                        <label for="b2_months">B2 (2001.1.1.ë¶€í„°)</label>
                        <input type="number" id="b2_months" value="0">
                    </div>
                </div>
                <div class="input-group-wrapper" id="exclude-group">
                    <h3 class="group-title">C (ì¬ì§ ì œì™¸)</h3>
                    <div class="form-group">
                        <label for="c1_months">C1 (2000.12.31.ê¹Œì§€)</label>
                        <input type="number" id="c1_months" value="0">
                    </div>
                    <div class="form-group">
                        <label for="c2_months">C2 (2001.1.1.ë¶€í„°)</label>
                        <input type="number" id="c2_months" value="0">
                    </div>
                </div>
            </div>
        </div>
        
        <div id="modern-inputs" style="display: none;">
            <p style="text-align:center; color:#666;">
                1996.1.1. ì´í›„ ì„ìš©ìëŠ” ì…ë ¥í•˜ì‹  <strong>ìƒë…„ì›”ì¼</strong>ê³¼ <strong>ë°œë ¹ì¼</strong>ì„ ê¸°ì¤€ìœ¼ë¡œ<br>
                ì •ë…„ í‡´ì§ì¼ì„ ì‚°ì¶œí•˜ì—¬ ì—°ê¸ˆ ê°œì‹œ ì—°ë ¹ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
            </p>
        </div>
        
        <button onclick="calculatePensionDate()" class="full-width">ê³„ì‚°í•˜ê¸°</button>

        <div id="result-container">
            <h2>ê³„ì‚° ê²°ê³¼</h2>
            <p id="finalResult" class="final-result" style="display:none;"></p>
            <div id="retirement-info" class="retirement-info" style="display:none;"></div>
            <div id="formula-explanation" class="calculation-box"></div>
            <div id="detailed-steps" class="calculation-box"></div>
        </div>
    </div>

    <div class="footer">
        @ì‘ì„±ì: ì¸í¬í”½ë© 2025.10.27.
    </div>

<div style="text-align: center; margin-top: 30px; margin-bottom: 50px;">
    <p style="font-size: 14px; color: #666; margin-bottom: 10px;">
        ë” ë§ì€ ì—°ê¸ˆ ì •ë³´ì™€ ì€í‡´ ì¤€ë¹„ íŒì´ ê¶ê¸ˆí•˜ë‹¤ë©´?
    </p>
    <a href="https://jktv2025.tistory.com" target="_blank" 
       style="background-color: #F06C00; color: white; padding: 12px 25px; 
              text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 16px; 
              box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: 0.3s;">
       ğŸ  ì£¼ì¸ì¥ ë¸”ë¡œê·¸ ë†€ëŸ¬ê°€ê¸°
    </a>
</div>


    
    <script>
        const CUTOFF_DATE = new Date('1996-01-01');

        function checkCalculatorMode() {
            const d_date_str = document.getElementById('startDate').value;
            if (!d_date_str) return;
            const hireDate = new Date(d_date_str);

            if (hireDate < CUTOFF_DATE) {
                document.getElementById('subtitle-text').innerText = "1996.1.1. ì´ì „ ë°œë ¹ì (x2 ê³µì‹ ì ìš©)";
                document.getElementById('legacy-inputs').style.display = 'block';
                document.getElementById('modern-inputs').style.display = 'none';
            } else {
                document.getElementById('subtitle-text').innerText = "1996.1.1. ì´í›„ ë°œë ¹ì (ê°œì •ë²• ì ìš©)";
                document.getElementById('legacy-inputs').style.display = 'none';
                document.getElementById('modern-inputs').style.display = 'block';
            }
            document.getElementById('finalResult').style.display = 'none';
            document.getElementById('retirement-info').style.display = 'none';
            document.getElementById('formula-explanation').style.display = 'none';
            document.getElementById('detailed-steps').style.display = 'none';
        }

        function calculateTeacherRetirementDate(birthDate) {
            const birthYear = birthDate.getFullYear();
            const birthMonth = birthDate.getMonth() + 1; 
            const year62 = birthYear + 62;
            
            let retirementDate;
            if (birthMonth >= 1 && birthMonth <= 6) {
                retirementDate = new Date(year62, 7, 31); 
            } else {
                retirementDate = new Date(year62 + 1, 1, 28); 
                const isLeap = new Date(year62 + 1, 1, 29).getMonth() === 1;
                if(isLeap) retirementDate = new Date(year62 + 1, 1, 29);
            }
            return retirementDate;
        }

        function calculatePensionDate() {
            const d_date_str = document.getElementById('startDate').value;
            const birth_date_str = document.getElementById('birthDate').value;

            if (!d_date_str || !birth_date_str) {
                alert("ë°œë ¹ì¼ê³¼ ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            const hireDate = new Date(d_date_str);
            const birthDate = new Date(birth_date_str);

            if (hireDate < CUTOFF_DATE) {
                calculateLegacyPension(hireDate, birthDate);
            } else {
                calculateModernPension(hireDate, birthDate);
            }
        }

        function calculateLegacyPension(hireDate, birthDate) {
            try {
                const b1_months = parseInt(document.getElementById('b1_months').value) || 0;
                const c1_months = parseInt(document.getElementById('c1_months').value) || 0;
                const b2_months = parseInt(document.getElementById('b2_months').value) || 0;
                const c2_months = parseInt(document.getElementById('c2_months').value) || 0;
                
                const d_year = hireDate.getFullYear();
                const d_month = hireDate.getMonth();
                const diff_months = (2000 - d_year) * 12 + (11 - d_month) + 1;
                const A_months = diff_months + b1_months - c1_months;
                const base_months = 240; 
                const inner_calc = A_months + b2_months - c2_months;
                const total_months_to_add = (base_months - inner_calc) * 2;

                const start_date = new Date('2001-01-01');
                const final_date = new Date(start_date);
                final_date.setMonth(start_date.getMonth() + total_months_to_add);

                const final_date_str = `${final_date.getFullYear()}ë…„ ${final_date.getMonth() + 1}ì›” ${final_date.getDate()}ì¼`;
                const retirementDate = calculateTeacherRetirementDate(birthDate);
                const retirementDateStr = `${retirementDate.getFullYear()}ë…„ ${retirementDate.getMonth() + 1}ì›” ${retirementDate.getDate()}ì¼`;
                
                let compareMsg = "";
                let color = "";
                if (final_date <= retirementDate) {
                    compareMsg = "âœ… ì¶•í•˜í•©ë‹ˆë‹¤! ì •ë…„í‡´ì§ ì „ì— ì—°ê¸ˆ ì§€ê¸‰ ìš”ê±´ì„ ì¶©ì¡±í•˜ì‹­ë‹ˆë‹¤.";
                    color = "green";
                } else {
                    compareMsg = "âš ï¸ ì£¼ì˜: ê³„ì‚°ëœ ì‹œì ì´ ì •ë…„í‡´ì§ì¼ë³´ë‹¤ ëŠ¦ìŠµë‹ˆë‹¤. (í™•ì¸ í•„ìš”)";
                    color = "#d9534f";
                }

                document.getElementById('finalResult').innerText = `ì—°ê¸ˆ ì‹œì ì¼: ${final_date_str}`;
                document.getElementById('finalResult').style.display = 'block';

                document.getElementById('retirement-info').innerHTML = `
                    <strong>[êµì‚¬ ì •ë…„ í‡´ì§ì¼]</strong><br>
                    ${retirementDateStr} (ë§Œ 62ì„¸)<br><br>
                    <span style="color:${color}; font-weight:bold;">${compareMsg}</span>
                `;
                document.getElementById('retirement-info').style.display = 'block';

                document.getElementById('formula-explanation').innerHTML = `
                    <h3 style="margin-top:0; color:#005a9c;">â–  x2 ê³µì‹ ì ìš© ê²°ê³¼</h3>
                    <p><strong>ì™œ 2000/2001ë…„ì„ ë‚˜ëˆ„ë‚˜ìš”?</strong><br>
                    2000.12.31. ê¸°ì¤€ìœ¼ë¡œ 20ë…„ ë¯¸ë‹¬ ê¸°ê°„ì„ ì‚°ì¶œí•˜ì—¬ 2ë°°ìˆ˜ íŒ¨ë„í‹°ë¥¼ ì ìš©í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.<br>
                    B1(2000ë…„ ì´ì „) ì¬ì§ì´ ë§ì„ìˆ˜ë¡ íŒ¨ë„í‹° ê¸°ê°„ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.</p>
                `;
                document.getElementById('formula-explanation').style.display = 'block';
                document.getElementById('detailed-steps').style.display = 'none';

            } catch (e) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + e.message);
            }
        }

        function calculateModernPension(hireDate, birthDate) {
            try {
                const retirementDate = calculateTeacherRetirementDate(birthDate);
                const retirementYear = retirementDate.getFullYear();
                
                let startAge = 0;
                if (retirementYear <= 2021) startAge = 60;
                else if (retirementYear <= 2023) startAge = 61;
                else if (retirementYear <= 2026) startAge = 62;
                else if (retirementYear <= 2029) startAge = 63;
                else if (retirementYear <= 2032) startAge = 64;
                else startAge = 65;

                const pensionStartYear = birthDate.getFullYear() + startAge;
                const gapYears = startAge - 62;
                let gapMsg = "";
                if (gapYears > 0) {
                    gapMsg = `âš ï¸ ì •ë…„(62ì„¸) í‡´ì§ í›„ <strong>ì•½ ${gapYears}ë…„ì˜ ì†Œë“ ê³µë°±</strong>ì´ ë°œìƒí•©ë‹ˆë‹¤.`;
                } else {
                    gapMsg = "âœ… ì •ë…„í‡´ì§ê³¼ ë™ì‹œì—(í˜¹ì€ ì§í›„) ì—°ê¸ˆì„ ìˆ˜ë ¹í•©ë‹ˆë‹¤.";
                }

                document.getElementById('finalResult').innerText = `ì—°ê¸ˆ ì§€ê¸‰ ê°œì‹œ: ë§Œ ${startAge}ì„¸ (${pensionStartYear}ë…„)`;
                document.getElementById('finalResult').style.display = 'block';

                document.getElementById('retirement-info').innerHTML = `
                    <strong>[êµì‚¬ ì •ë…„ í‡´ì§ì¼]</strong><br>
                    ${retirementDate.getFullYear()}ë…„ ${retirementDate.getMonth() + 1}ì›” ${retirementDate.getDate()}ì¼ (ë§Œ 62ì„¸)<br><br>
                    <span style="color:#d9534f;">${gapMsg}</span>
                `;
                document.getElementById('retirement-info').style.display = 'block';

                document.getElementById('formula-explanation').innerHTML = `
                    <h3 style="margin-top:0; color:#005a9c;">â–  ê°œì •ë²• ì ìš© (ì†Œë“ ê³µë°± í™•ì¸)</h3>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><strong>ì˜ˆìƒ í‡´ì§ì—°ë„:</strong> ${retirementYear}ë…„</li>
                        <li><strong>ë²•ì • ê°œì‹œ ì—°ë ¹:</strong> ë§Œ ${startAge}ì„¸</li>
                        <li><strong>ì •ë…„(62ì„¸)ê³¼ì˜ ì°¨ì´:</strong> ${gapYears}ë…„</li>
                    </ul>
                `;
                document.getElementById('formula-explanation').style.display = 'block';
                document.getElementById('detailed-steps').style.display = 'none';

            } catch (e) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + e.message);
            }
        }
        
        window.onload = () => {
            checkCalculatorMode();
        };
    </script>

</body>
</html>

