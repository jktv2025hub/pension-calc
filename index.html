<www.InfoPickLab.com>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµì‚¬ ì—°ê¸ˆ ìˆ˜ë ¹ ì‹œì ì¼ ê³„ì‚°ê¸° (ì •ë…„ë¹„êµ)</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            line-height: 1.7;
            background-color: #f8f9fa;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 700px;
            width: 100%;
            background: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
            margin-bottom: 20px;
        }

        /* ê³µë¬´ì›ì—°ê¸ˆë²• ì¼ë°˜ ì„¤ëª… ë°•ìŠ¤ */
        .general-explanation {
            background-color: #f0f7ff;
            border: 1px solid #b3d7ff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 15px;
            line-height: 1.8;
        }
        .general-explanation h2 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #005a9c;
            border-bottom: 1px solid #005a9c;
            padding-bottom: 8px;
        }
        .general-explanation h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: #333;
        }
        .general-explanation ul {
            padding-left: 20px;
            list-style-type: disc;
            margin: 10px 0;
        }
        
        h1 {
            color: #005a9c;
            padding-bottom: 5px;
            text-align: center;
            font-size: 28px;
            margin-bottom: 0;
        }
        .subtitle {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #005a9c;
            padding-bottom: 10px;
        }
        h2 {
            color: #333;
            margin-top: 25px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px; 
        }
        .form-group {
            margin-bottom: 15px;
        }
        .full-width {
            grid-column: 1 / -1; 
        }
        
        .input-group-wrapper {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        #include-group {
            background-color: #f0f7ff;
            border-color: #b3d7ff;
        }
        #exclude-group {
            background-color: #fff8f0;
            border-color: #ffe0b3;
        }
        #common-inputs {
            background-color: #fffbe6; /* ì—°í•œ ë…¸ë€ìƒ‰ */
            border: 1px solid #ffe58f;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .group-title {
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
            font-size: 17px;
            color: #333;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            font-weight: bold;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 16px;
        }
        input[type="date"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            box-sizing: border-box; 
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            background-color: #005a9c;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            width: 100%;
            font-weight: bold;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        button:hover {
            background-color: #004a80;
        }
        
        #result-container {
            margin-top: 25px;
        }
        .final-result {
            font-size: 22px;
            font-weight: bold;
            color: #d9534f;
            background-color: #fdf7f7;
            padding: 20px;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            text-align: center;
        }
        /* ì •ë…„ ë¹„êµ ë°•ìŠ¤ */
        .retirement-info {
            background-color: #e6f7ff;
            border: 1px solid #91d5ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: center;
            font-size: 18px;
        }
        
        .calculation-box {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: 'Consolas', 'Courier New', monospace;
            line-height: 1.8;
            font-size: 15px;
            display: none;
        }
        hr {
            border: 0;
            border-top: 1px dashed #ccc;
            margin: 15px 0;
        }
        .footer {
            text-align: center;
            font-size: 14px;
            color: #888;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="container">

        <div class="general-explanation">
            <h2>ğŸ« ê³µë¬´ì›ì—°ê¸ˆë²•ìƒ 'ì—°ê¸ˆì‹œì ì¼' ì •ë¦¬</h2>
            <p>ì´ ê³„ì‚°ê¸°ëŠ” <strong>ìƒë…„ì›”ì¼</strong>ì„ ê¸°ì¤€ìœ¼ë¡œ <strong>êµì‚¬ ì •ë…„(ë§Œ 62ì„¸)</strong>ì„ ìë™ìœ¼ë¡œ ê³„ì‚°í•˜ì—¬ ì—°ê¸ˆ ìˆ˜ë ¹ ì‹œì ê³¼ ë¹„êµí•´ ë“œë¦½ë‹ˆë‹¤.</p>
            
            <h3>1. 1996ë…„ 1ì›” 1ì¼ ì´ì „ ì„ìš©ì</h3>
            <ul>
                <li><strong>íŠ¹ì§•:</strong> ì •ë…„(62ì„¸) ì´ì „ì— ì—°ê¸ˆ ì§€ê¸‰ ìš”ê±´ì´ ì¶©ì¡±ë˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ì ìš©:</strong> 'x2 ê³µì‹'ì„ í†µí•´ ê³„ì‚°ëœ ë‚ ì§œê°€ ì •ë…„í‡´ì§ì¼ë³´ë‹¤ ë¹ ë¥¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
            </ul>

            <h3>2. 1996ë…„ 1ì›” 1ì¼ ì´í›„ ì„ìš©ì</h3>
            <ul>
                <li><strong>íŠ¹ì§•:</strong> ì •ë…„(62ì„¸) í‡´ì§ í›„ ì—°ê¸ˆì„ ë°›ì„ ë•Œê¹Œì§€ì˜ <strong>'ì†Œë“ ê³µë°± ê¸°ê°„'</strong>ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                <li><strong>ì ìš©:</strong> í‡´ì§ì—°ë„ì— ë”°ë¼ ë§Œ 60~65ì„¸ ê°œì‹œ ì—°ë ¹ì´ ê²°ì •ë©ë‹ˆë‹¤.</li>
            </ul>
        </div>

        <h1>êµì‚¬ ì—°ê¸ˆ ì‹œì ì¼ ê³„ì‚°ê¸°</h1>
        <p class="subtitle" id="subtitle-text">1996.1.1. ì´ì „ ë°œë ¹ì</p>

        <!-- [NEW] ê³µí†µ ì…ë ¥ë€: ë°œë ¹ì¼ + ìƒë…„ì›”ì¼ -->
        <div id="common-inputs">
            <div class="form-grid">
                <div class="form-group">
                    <label for="startDate">D (ë°œë ¹ì¼):</label>
                    <input type="date" id="startDate" value="1995-09-01" onchange="checkCalculatorMode()">
                </div>
                <div class="form-group">
                    <label for="birthDate">ë³¸ì¸ ìƒë…„ì›”ì¼:</label>
                    <input type="date" id="birthDate" value="1970-01-01">
                </div>
            </div>
        </div>
        
        <!-- 1996.1.1 ì´ì „ ë°œë ¹ììš© ì…ë ¥ (Legacy) -->
        <div id="legacy-inputs">
            <div class="form-grid">
                <div class="input-group-wrapper" id="include-group">
                    <h3 class="group-title">B (ì¬ì§ í¬í•¨)</h3>
                    <div class="form-group">
                        <label for="b1_months">B1 (2000.12.31.ê¹Œì§€)</label>
                        <input type="number" id="b1_months" value="28">
                    </div>
                    <div class="form-group">
                        <label for="b2_months">B2 (2001.1.1.ë¶€í„°)</label>
                        <input type="number" id="b2_months" value="0">
                    </div>
                </div>
                <div class="input-group-wrapper" id="exclude-group">
                    <h3 class="group-title">C (ì¬ì§ ì œì™¸)</h3>
                    <div class="form-group">
                        <label for="c1_months">C1 (2000.12.31.ê¹Œì§€)</label>
                        <input type="number" id="c1_months" value="0">
                    </div>
                    <div class="form-group">
                        <label for="c2_months">C2 (2001.1.1.ë¶€í„°)</label>
                        <input type="number" id="c2_months" value="0">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 1996.1.1 ì´í›„ ë°œë ¹ììš© ì…ë ¥ (Modern) -->
        <div id="modern-inputs" style="display: none;">
            <!-- ìƒë…„ì›”ì¼ì´ ìˆìœ¼ë¯€ë¡œ ë³„ë„ ì…ë ¥ ë¶ˆí•„ìš”, ìë™ ê³„ì‚°ë¨ -->
            <p style="text-align:center; color:#666;">
                1996.1.1. ì´í›„ ì„ìš©ìëŠ” ì…ë ¥í•˜ì‹  <strong>ìƒë…„ì›”ì¼</strong>ê³¼ <strong>ë°œë ¹ì¼</strong>ì„ ê¸°ì¤€ìœ¼ë¡œ<br>
                ì •ë…„ í‡´ì§ì¼ì„ ì‚°ì¶œí•˜ì—¬ ì—°ê¸ˆ ê°œì‹œ ì—°ë ¹ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
            </p>
        </div>
        
        <button onclick="calculatePensionDate()" class="full-width">ê³„ì‚°í•˜ê¸°</button>

        <div id="result-container">
            <h2>ê³„ì‚° ê²°ê³¼</h2>
            <!-- 1. ìµœì¢… ê²°ê³¼ (ì—°ê¸ˆ ì‹œì ) -->
            <p id="finalResult" class="final-result" style="display:none;"></p>
            
            <!-- [NEW] 2. ì •ë…„ ë¹„êµ ì •ë³´ -->
            <div id="retirement-info" class="retirement-info" style="display:none;"></div>

            <!-- 3. ê³µì‹ ì„¤ëª… -->
            <div id="formula-explanation" class="calculation-box"></div>
            <!-- 4. ìƒì„¸ ê³¼ì • -->
            <div id="detailed-steps" class="calculation-box"></div>
        </div>
    </div>

    <div class="footer">
        @ì‘ì„±ì: LeeJaeKyun 2025.10.27.
    </div>

    <script>
        const CUTOFF_DATE = new Date('1996-01-01');

        function checkCalculatorMode() {
            const d_date_str = document.getElementById('startDate').value;
            if (!d_date_str) return;
            const hireDate = new Date(d_date_str);

            if (hireDate < CUTOFF_DATE) {
                document.getElementById('subtitle-text').innerText = "1996.1.1. ì´ì „ ë°œë ¹ì (x2 ê³µì‹ ì ìš©)";
                document.getElementById('legacy-inputs').style.display = 'block';
                document.getElementById('modern-inputs').style.display = 'none';
            } else {
                document.getElementById('subtitle-text').innerText = "1996.1.1. ì´í›„ ë°œë ¹ì (ê°œì •ë²• ì ìš©)";
                document.getElementById('legacy-inputs').style.display = 'none';
                document.getElementById('modern-inputs').style.display = 'block';
            }
            // ê²°ê³¼ì°½ ì´ˆê¸°í™”
            document.getElementById('finalResult').style.display = 'none';
            document.getElementById('retirement-info').style.display = 'none';
            document.getElementById('formula-explanation').style.display = 'none';
            document.getElementById('detailed-steps').style.display = 'none';
        }

        // êµì‚¬ ì •ë…„ í‡´ì§ì¼ ê³„ì‚° í•¨ìˆ˜ (ë§Œ 62ì„¸ í•™ê¸°ë§)
        function calculateTeacherRetirementDate(birthDate) {
            const birthYear = birthDate.getFullYear();
            const birthMonth = birthDate.getMonth() + 1; // 1-12
            
            // ë§Œ 62ì„¸ê°€ ë˜ëŠ” í•´
            const year62 = birthYear + 62;
            
            // êµìœ¡ê³µë¬´ì›ë²• ì •ë…„ ê·œì •: 
            // 3ì›”~8ì›”ìƒ -> 8ì›” 31ì¼ í‡´ì§
            // 9ì›”~2ì›”ìƒ -> ë‹¤ìŒí•´ 2ì›” 28ì¼(29ì¼) í‡´ì§
            // *ë‹¨, ì‹¤ì œ ì ìš©ì€ í•™ê¸° ë‹¨ìœ„ì´ë¯€ë¡œ ë³´í†µ ìƒì¼ì´ ì†í•œ í•™ê¸°ì˜ ë§ì¼ì…ë‹ˆë‹¤.
            // ìƒë°˜ê¸°(1ì›”~6ì›”) ì¶œìƒ -> 8ì›” 31ì¼ í‡´ì§
            // í•˜ë°˜ê¸°(7ì›”~12ì›”) ì¶œìƒ -> ë‹¤ìŒí•´ 2ì›” 28ì¼ í‡´ì§
            
            let retirementDate;
            if (birthMonth >= 1 && birthMonth <= 6) {
                retirementDate = new Date(year62, 7, 31); // 8ì›” 31ì¼ (month is 0-indexed)
            } else {
                retirementDate = new Date(year62 + 1, 1, 28); // ë‹¤ìŒí•´ 2ì›” 28ì¼ (ìœ¤ë…„ ì²´í¬ ì•½ì‹)
                // ìœ¤ë…„ ì²´í¬ (2ì›” 29ì¼)
                const isLeap = new Date(year62 + 1, 1, 29).getMonth() === 1;
                if(isLeap) retirementDate = new Date(year62 + 1, 1, 29);
            }
            return retirementDate;
        }

        function calculatePensionDate() {
            const d_date_str = document.getElementById('startDate').value;
            const birth_date_str = document.getElementById('birthDate').value;

            if (!d_date_str || !birth_date_str) {
                alert("ë°œë ¹ì¼ê³¼ ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            const hireDate = new Date(d_date_str);
            const birthDate = new Date(birth_date_str);

            if (hireDate < CUTOFF_DATE) {
                calculateLegacyPension(hireDate, birthDate);
            } else {
                calculateModernPension(hireDate, birthDate);
            }
        }

        // 1. 1996.1.1 ì´ì „ (Legacy)
        function calculateLegacyPension(hireDate, birthDate) {
            try {
                const b1_months = parseInt(document.getElementById('b1_months').value) || 0;
                const c1_months = parseInt(document.getElementById('c1_months').value) || 0;
                const b2_months = parseInt(document.getElementById('b2_months').value) || 0;
                const c2_months = parseInt(document.getElementById('c2_months').value) || 0;
                
                // ê³µì‹ ê³„ì‚°
                const d_year = hireDate.getFullYear();
                const d_month = hireDate.getMonth();
                const diff_months = (2000 - d_year) * 12 + (11 - d_month) + 1;
                const A_months = diff_months + b1_months - c1_months;
                const base_months = 240; 
                const inner_calc = A_months + b2_months - c2_months;
                const total_months_to_add = (base_months - inner_calc) * 2;

                const start_date = new Date('2001-01-01');
                const final_date = new Date(start_date);
                final_date.setMonth(start_date.getMonth() + total_months_to_add);

                // ê²°ê³¼ ë¬¸ìì—´
                const final_date_str = `${final_date.getFullYear()}ë…„ ${final_date.getMonth() + 1}ì›” ${final_date.getDate()}ì¼`;
                
                // ì •ë…„ ê³„ì‚° ë° ë¹„êµ
                const retirementDate = calculateTeacherRetirementDate(birthDate);
                const retirementDateStr = `${retirementDate.getFullYear()}ë…„ ${retirementDate.getMonth() + 1}ì›” ${retirementDate.getDate()}ì¼`;
                
                let compareMsg = "";
                let color = "";
                if (final_date <= retirementDate) {
                    compareMsg = "âœ… ì¶•í•˜í•©ë‹ˆë‹¤! ì •ë…„í‡´ì§ ì „ì— ì—°ê¸ˆ ì§€ê¸‰ ìš”ê±´ì„ ì¶©ì¡±í•˜ì‹­ë‹ˆë‹¤.";
                    color = "green";
                } else {
                    compareMsg = "âš ï¸ ì£¼ì˜: ê³„ì‚°ëœ ì‹œì ì´ ì •ë…„í‡´ì§ì¼ë³´ë‹¤ ëŠ¦ìŠµë‹ˆë‹¤. (í™•ì¸ í•„ìš”)";
                    color = "#d9534f";
                }

                // í‘œì‹œ
                document.getElementById('finalResult').innerText = `ì—°ê¸ˆ ì‹œì ì¼: ${final_date_str}`;
                document.getElementById('finalResult').style.display = 'block';

                document.getElementById('retirement-info').innerHTML = `
                    <strong>[êµì‚¬ ì •ë…„ í‡´ì§ì¼]</strong><br>
                    ${retirementDateStr} (ë§Œ 62ì„¸)<br><br>
                    <span style="color:${color}; font-weight:bold;">${compareMsg}</span>
                `;
                document.getElementById('retirement-info').style.display = 'block';

                // ìƒì„¸ ë‚´ìš©
                document.getElementById('formula-explanation').innerHTML = `
                    <h3 style="margin-top:0; color:#005a9c;">â–  x2 ê³µì‹ ì ìš© ê²°ê³¼</h3>
                    <p>ì •ë…„(ë§Œ 62ì„¸)ê³¼ ì—°ê¸ˆ ì‹œì ì¼ì„ ë¹„êµí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
                `;
                document.getElementById('formula-explanation').style.display = 'block';

                document.getElementById('detailed-steps').style.display = 'none'; // x2 ê³µì‹ì€ ë³µì¡í•´ì„œ ê°„ë‹¨íˆ ì²˜ë¦¬

            } catch (e) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + e.message);
            }
        }

        // 2. 1996.1.1 ì´í›„ (Modern)
        function calculateModernPension(hireDate, birthDate) {
            try {
                // ì •ë…„ í‡´ì§ì¼ ë¨¼ì € ê³„ì‚°
                const retirementDate = calculateTeacherRetirementDate(birthDate);
                const retirementYear = retirementDate.getFullYear();
                
                // í‡´ì§ì—°ë„ì— ë”°ë¥¸ ê°œì‹œ ì—°ë ¹ íŒë³„
                let startAge = 0;
                if (retirementYear <= 2021) startAge = 60;
                else if (retirementYear <= 2023) startAge = 61;
                else if (retirementYear <= 2026) startAge = 62;
                else if (retirementYear <= 2029) startAge = 63;
                else if (retirementYear <= 2032) startAge = 64;
                else startAge = 65;

                // ì—°ê¸ˆ ê°œì‹œì¼ (ìƒì¼ ê¸°ì¤€ í•´ë‹¹ ì—°ë„)
                const pensionStartYear = birthDate.getFullYear() + startAge;
                
                // ê³µë°± ê¸°ê°„ ê³„ì‚°
                const gapYears = startAge - 62;
                let gapMsg = "";
                if (gapYears > 0) {
                    gapMsg = `âš ï¸ ì •ë…„(62ì„¸) í‡´ì§ í›„ <strong>ì•½ ${gapYears}ë…„ì˜ ì†Œë“ ê³µë°±</strong>ì´ ë°œìƒí•©ë‹ˆë‹¤.`;
                } else {
                    gapMsg = "âœ… ì •ë…„í‡´ì§ê³¼ ë™ì‹œì—(í˜¹ì€ ì§í›„) ì—°ê¸ˆì„ ìˆ˜ë ¹í•©ë‹ˆë‹¤.";
                }

                // ê²°ê³¼ í‘œì‹œ
                document.getElementById('finalResult').innerText = `ì—°ê¸ˆ ì§€ê¸‰ ê°œì‹œ: ë§Œ ${startAge}ì„¸ (${pensionStartYear}ë…„)`;
                document.getElementById('finalResult').style.display = 'block';

                document.getElementById('retirement-info').innerHTML = `
                    <strong>[êµì‚¬ ì •ë…„ í‡´ì§ì¼]</strong><br>
                    ${retirementDate.getFullYear()}ë…„ ${retirementDate.getMonth() + 1}ì›” ${retirementDate.getDate()}ì¼ (ë§Œ 62ì„¸)<br><br>
                    <span style="color:#d9534f;">${gapMsg}</span>
                `;
                document.getElementById('retirement-info').style.display = 'block';

                document.getElementById('formula-explanation').innerHTML = `
                    <h3 style="margin-top:0; color:#005a9c;">â–  ê°œì •ë²• ì ìš© (ì†Œë“ ê³µë°± í™•ì¸)</h3>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><strong>ì˜ˆìƒ í‡´ì§ì—°ë„:</strong> ${retirementYear}ë…„</li>
                        <li><strong>ë²•ì • ê°œì‹œ ì—°ë ¹:</strong> ë§Œ ${startAge}ì„¸</li>
                        <li><strong>ì •ë…„(62ì„¸)ê³¼ì˜ ì°¨ì´:</strong> ${gapYears}ë…„</li>
                    </ul>
                `;
                document.getElementById('formula-explanation').style.display = 'block';
                document.getElementById('detailed-steps').style.display = 'none';

            } catch (e) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + e.message);
            }
        }
        
        window.onload = () => {
            checkCalculatorMode();
        };
    </script>

</body>
</html>
